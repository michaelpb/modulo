<!DOCTYPE HTML>
<head><link rel="stylesheet" href="/js/codemirror_5.63.0/codemirror_bundled.css">
<script src="/js/codemirror_5.63.0/codemirror_bundled.js"></script>
<!-- ... -->

        <meta charset="utf8" />
        <script src="/js/Modulo.js"></script>
        <script>
        if (!Modulo.fetchQ) {
            Modulo.fetchQ = new Modulo.FetchQueue();
            Modulo.assets = new Modulo.AssetManager();
        }
        window.onload = () => {
            Modulo.fetchQ.wait(() => {
                Modulo.defineAll();
            });
        };
        </script>
    
<script>"use strict";Modulo.assets.functions["x11m00cs"]= function (Modulo, factory, module, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

        let txt;

        function sloccount() {
            if (!txt) {
                txt = Modulo.require('fs').readFileSync('./src/Modulo.js', 'utf8');
            }
            return Modulo.require('sloc')(txt, 'js').source;
        }

        function checksum() {
            if (!txt) {
                txt = Modulo.require('fs').readFileSync('./src/Modulo.js', 'utf8');
            }
            const CryptoJS = Modulo.require("crypto-js");
            const hash = CryptoJS['SHA384'](txt);
            return hash.toString(CryptoJS.enc.Base64);
            //const shaObj = new jsSHA("SHA-384", "TEXT", { encoding: "UTF8" });

            //shaObj.update(txt);
            //const hash = shaObj.getHash("B64");
            //return hash;
        }

        function getGlobalInfo() {
            // Only do once to speed up SSG
            //console.log('this is Modulo', Object.keys(Modulo));
            if (!Modulo.isBackend) {
                return;
            }
            if (!Modulo.ssgStore.versionInfo) {
                const bytes = Modulo.require('fs').readFileSync('./package.json');
                const data = JSON.parse(bytes);
                Modulo.ssgStore.versionInfo = {
                    version: data.version,
                    sloc: sloccount(),
                    checksum: checksum(),
                };
            }
            return Modulo.ssgStore.versionInfo;
        }

        // https://stackoverflow.com/questions/400212/
        const {document, navigator} = Modulo.globals;
        function fallbackCopyTextToClipboard(text) {
            console.count('fallbackCopyTextToClipboard');
            var textArea = document.createElement("textarea");
            textArea.value = text;

            // Avoid scrolling to bottom
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";

            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                var successful = document.execCommand('copy');
                var msg = successful ? 'successful' : 'unsuccessful';
                //console.log('Fallback: Copying text command was ' + msg);
            } catch (err) {
                //console.error('Fallback: Oops, unable to copy', err);
            }

            document.body.removeChild(textArea);
        }

        function copyTextToClipboard(text) {
            if (!navigator.clipboard) {
                fallbackCopyTextToClipboard(text);
                return;
            }
            navigator.clipboard.writeText(text).then(function() {
                //console.log('Async: Copying to clipboard was successful!');
            }, function(err) {
                console.error('Async: Could not copy text: ', err);
            });
        }
    
return { "sloccount": typeof sloccount !== "undefined" ? sloccount : undefined,
"checksum": typeof checksum !== "undefined" ? checksum : undefined,
"getGlobalInfo": typeof getGlobalInfo !== "undefined" ? getGlobalInfo : undefined,
"fallbackCopyTextToClipboard": typeof fallbackCopyTextToClipboard !== "undefined" ? fallbackCopyTextToClipboard : undefined,
"copyTextToClipboard": typeof copyTextToClipboard !== "undefined" ? copyTextToClipboard : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["x1kg0tea"]= function (Modulo, factory, module, component, props, template, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'props') props = value; if (name === 'template') template = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

        function initializedCallback() {
            //console.log('this is module', module);
            if (Modulo.isBackend && module) {
                //Modulo.ssgStore.navbar = module.script.getGlobalInfo();
                //Object.assign(script.exports, Modulo.ssgStore.navbar);
                const info = module.script.getGlobalInfo();
                Object.assign(script.exports, info);
                // Store results in DOM for FE JS
                element.setAttribute('script-exports', JSON.stringify(script.exports));
            } else if (element.getAttribute('script-exports')) {
                // FE JS, retrieve from DOM
                const dataStr = element.getAttribute('script-exports');
                Object.assign(script.exports, JSON.parse(dataStr));
            } else {
                //console.log('Warning: Couldnt get global info');
            }
        }
    
return { "initializedCallback": typeof initializedCallback !== "undefined" ? initializedCallback : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["x1gol8eg"]= function (Modulo, factory, module, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

        // Splits up own source-code to get source for each example
        const mySrc = '/components/examplelib.html';
        const myText = Modulo.fetchQ.data[mySrc];
        const componentTexts = {};
        if (myText) {
            let name = '';
            let currentComponent = '';
            let inTestSuite = false;
            for (const line of myText.split('\n')) {
                const lower = line.toLowerCase();
                if (lower.startsWith('</component>')) {
                    componentTexts[name] = currentComponent;
                    currentComponent = '';
                    name = null;
                } else if (lower.startsWith('<component')) {
                    name = line.split(' name="')[1].split('"')[0];
                } else if (lower.startsWith('<testsuite')) {
                    inTestSuite = true;
                } else if (lower.includes('</testsuite>')) {
                    inTestSuite = false;
                } else if (name && !inTestSuite) {
                    currentComponent += line + '\n';
                }
            }
        }
        script.exports.componentTexts = componentTexts;
    
return {  setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["1n5m36a"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    function countUp() {
        state.num++;
    }

return { "countUp": typeof countUp !== "undefined" ? countUp : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><style>
eg-Simple em { color: darkgreen; }
eg-Simple * { text-decoration: underline; }
</style><script>"use strict";Modulo.assets.functions["x1cdn50g"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    function addItem() {
        state.list.push(state.text); // add to list
        state.text = ""; // clear input
    }

return { "addItem": typeof addItem !== "undefined" ? addItem : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["dfca1k"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    function fetchGitHub() {
        fetch(`https://api.github.com/users/${state.search}`)
            .then(response => response.json())
            .then(githubCallback);
    }
    function githubCallback(apiData) {
        state.name = apiData.name;
        state.location = apiData.location;
        state.bio = apiData.bio;
        element.rerender();
    }

return { "fetchGitHub": typeof fetchGitHub !== "undefined" ? fetchGitHub : undefined,
"githubCallback": typeof githubCallback !== "undefined" ? githubCallback : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["o25k49"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    // Because this variable is created "loose" in the script tag, it becomes a
    // static variable global to all instances of this class (though,
    // thankfully, not global in general -- it's still in an "IFFE")
    // (If we had wanted individual components to be debounced, we'd have
    // needed to attach it to state in the initializedCallback)
    let _globalDebounceTimeout = null;
    function _globalDebounce(func) {
        if (_globalDebounceTimeout) {
            clearTimeout(_globalDebounceTimeout);
        }
        _globalDebounceTimeout = setTimeout(func, 500);
    }

    function typingCallback() {
        state.loading = true;
        const apiBase = 'http://openlibrary.org/search.json'
        const search = `q=${state.search}`;
        const opts = 'limit=6&fields=title,author_name,cover_i';
        const url = `${apiBase}?${search}&${opts}`;
        _globalDebounce(() => {
            fetch(url)
                .then(response => response.json())
                .then(dataBackCallback);
        });
    }

    function dataBackCallback(data) {
        state.results = data.docs;
        state.loading = false;
        element.rerender();
    }

    // Puting this long URL down here to declutter
    script.exports.loadingGif = ('https://cdnjs.cloudflare.com/ajax/libs/' +
                                 'semantic-ui/0.16.1/images/loader-large.gif');

return { "_globalDebounce": typeof _globalDebounce !== "undefined" ? _globalDebounce : undefined,
"typingCallback": typeof typingCallback !== "undefined" ? typingCallback : undefined,
"dataBackCallback": typeof dataBackCallback !== "undefined" ? dataBackCallback : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><style>
eg-SearchBox SearchBox {
        position: relative;
        display: block;
        width: 300px;
    }
eg-SearchBox input {
        padding: 8px;
        background: coral;
        color: white;
        width: 200px;
        border: none;
    }
eg-SearchBox input::after {
        content: '\1F50E';
    }
eg-SearchBox .results-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }
eg-SearchBox .results {
        position: absolute;
        height: 0;
        width: 0;
        overflow: hidden;
        display: block;
        border: 2px solid coral;
        border-radius: 0 0 20px 20px;
        transition: height 2s;
        z-index: 1;
        background: white;
    }
eg-SearchBox .results.visible {
        height: 200px;
        width: 200px;
    }
eg-SearchBox .result {
        padding: 10px;
        width: 80px;
        position: relative;
    }
eg-SearchBox .result label {
        position: absolute;
        width: 80px;
        background: rgba(255, 255, 255, 0.5);
        font-size: 0.7rem;
        top: 0;
        left: 0;
    }
</style><script>"use strict";Modulo.assets.functions["1iu3f2i"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    // Getting big a range of numbers in JS. Use "script.exports"
    // to export this as a one-time global constant.
    // (Hint: Curious how it calculates prime? See CSS!)
    script.exports.range = 
        Array.from({length: 63}, (x, i) => i + 2);
    function setNum(payload, ev) {
        state.number = Number(ev.target.textContent);
    }

return { "setNum": typeof setNum !== "undefined" ? setNum : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><style>
eg-PrimeSieve .grid {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    color: #ccc;
    font-weight: bold;
    width: 100%;
    margin: -5px;
}
eg-PrimeSieve .grid > div {
    border: 1px solid #ccc;
    cursor: crosshair;
    transition: 0.2s;
}
eg-PrimeSieve div.whole {
    color: white;
    background: #B90183;
}
eg-PrimeSieve div.hidden {
    background: #ccc;
    color: #ccc;
}

/* Color green and add asterisk */
eg-PrimeSieve div.number { background: green; }
eg-PrimeSieve div.number::after { content: "*"; }
/* Check for whole factors (an adjacent div.whole).
eg-PrimeSieve If found, then hide asterisk and green */
eg-PrimeSieve div.whole ~ div.number { background: #B90183; }
eg-PrimeSieve div.whole ~ div.number::after { opacity: 0; }
</style><script>"use strict";Modulo.assets.functions["x1as77n0"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

const symbolsStr = "%!@#=?&+~÷≠∑µ‰∂Δƒσ"; // 16 options
function setup(payload) {
    const count = Number(payload);
    let symbols = symbolsStr.substr(0, count/2).split("");
    symbols = symbols.concat(symbols); // duplicate cards
    let id = 0;
    while (id < count) {
        const index = Math.floor(Math.random()
                                    * symbols.length);
        const symbol = symbols.splice(index, 1)[0];
        state.cards.push({symbol, id});
        id++;
    }
}

function failedFlipCallback() {
    // Remove both from revealed array & set to null
    state.revealed = state.revealed.filter(
            id => id !== state.failedflip
                    && id !== state.lastflipped);
    state.failedflip = null;
    state.lastflipped = null;
    state.message = "";
    element.rerender();
}

function flip(id) {
    if (state.failedflip !== null) {
        return;
    }
    id = Number(id);
    if (state.revealed.includes(id)) {
        return; // double click
    } else if (state.lastflipped === null) {
        state.lastflipped = id;
        state.revealed.push(id);
    } else {
        state.revealed.push(id);
        const {symbol} = state.cards[id];
        const lastCard = state.cards[state.lastflipped];
        if (symbol === lastCard.symbol) {
            // Successful match! Check for win.
            const {revealed, cards} = state;
            if (revealed.length === cards.length) {
                state.message = "You win!";
                state.win = true;
            } else {
                state.message = "Nice match!";
            }
            state.lastflipped = null;
        } else {
            state.message = "No match.";
            state.failedflip = id;
            setTimeout(failedFlipCallback, 1000);
        }
    }
}

return { "setup": typeof setup !== "undefined" ? setup : undefined,
"failedFlipCallback": typeof failedFlipCallback !== "undefined" ? failedFlipCallback : undefined,
"flip": typeof flip !== "undefined" ? flip : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><style>
eg-MemoryGame h3 {
    background: #B90183;
    border-radius: 8px;
    text-align: center;
    color: white;
    font-weight: bold;
}
eg-MemoryGame .board {
    display: grid;
    grid-template-rows: repeat(4, 1fr);
    grid-template-columns: repeat(4, 1fr);
    grid-gap: 2px;
    width: 100%;
    height: 150px;
    width: 150px;
}
eg-MemoryGame .board.hard {
    grid-gap: 1px;
    grid-template-rows: repeat(6, 1fr);
    grid-template-columns: repeat(6, 1fr);
}
eg-MemoryGame .board > .card {
    background: #B90183;
    border: 2px solid black;
    border-radius: 1px;
    cursor: pointer;
    text-align: center;
    min-height: 15px;
    transition: background 0.3s, transform 0.3s;
    transform: scaleX(-1);
    padding-top: 2px;
    color: #B90183;
}
eg-MemoryGame .board.hard > .card {
    border: none !important;
    padding: 0;
}
eg-MemoryGame .board > .card.flipped {
    background: #FFFFFF;
    border: 2px solid #B90183;
    transform: scaleX(1);
}

@keyframes flipping {
from { transform: scaleX(-1.1); background: #B90183; }
to {   transform: scaleX(1.0);  background: #FFFFFF; }
}
</style><script>"use strict";Modulo.assets.functions["13lid16"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    function toggle([ i, j ]) {
        if (!state.cells[i]) {
            state.cells[i] = {};
        }
        state.cells[i][j] = !state.cells[i][j];
    }

    function play() {
        state.playing = true;
        setTimeout(() => {
            if (state.playing) {
                updateNextFrame();
                element.rerender(); // manually rerender
                play(); // cue next frame
            }
        }, 2000 / state.speed);
    }

    function pause() {
        state.playing = false;
    }

    function clear() {
        state.cells = {};
    }

    function randomize() {
        for (const i of script.exports.range) {
            for (const j of script.exports.range) {
                if (!state.cells[i]) {
                    state.cells[i] = {};
                }
                state.cells[i][j] = (Math.random() > 0.5);
            }
        }
    }

    // Helper function for getting a cell from data
    const get = (i, j) => Boolean(state.cells[i] && state.cells[i][j]);
    function updateNextFrame() {
        const nextData = {};
        for (const i of script.exports.range) {
            for (const j of script.exports.range) {
                if (!nextData[i]) {
                    nextData[i] = {};
                }
                const count = countNeighbors(i, j);
                nextData[i][j] = get(i, j) ?
                    (count === 2 || count === 3) : // stays alive
                    (count === 3); // comes alive
            }
        }
        state.cells = nextData;
    }

    function countNeighbors(i, j) {
        const neighbors = [get(i - 1, j), get(i - 1, j - 1), get(i, j - 1),
                get(i + 1, j), get(i + 1, j + 1), get(i, j + 1),
                get(i + 1, j - 1), get(i - 1, j + 1)];
        return neighbors.filter(v => v).length;
    }
    script.exports.range = Array.from({length: 24}, (x, i) => i);

return { "toggle": typeof toggle !== "undefined" ? toggle : undefined,
"play": typeof play !== "undefined" ? play : undefined,
"pause": typeof pause !== "undefined" ? pause : undefined,
"clear": typeof clear !== "undefined" ? clear : undefined,
"randomize": typeof randomize !== "undefined" ? randomize : undefined,
"updateNextFrame": typeof updateNextFrame !== "undefined" ? updateNextFrame : undefined,
"countNeighbors": typeof countNeighbors !== "undefined" ? countNeighbors : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><style>
eg-ConwayGameOfLife {
        display: flex;
    }
eg-ConwayGameOfLife .grid {
        display: grid;
        grid-template-columns: repeat(24, 5px);
        margin: -2px;
        grid-gap: 1px;
    }
eg-ConwayGameOfLife .grid > div {
        background: white;
        width: 5px;
        height: 5px;
    }
eg-ConwayGameOfLife input,eg-ConwayGameOfLife button {
        width: 40px;
    }
</style><script>"use strict";Modulo.assets.functions["uon9pj"]= function (Modulo, factory, module, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

        // Splits up own source-code to get source for each example
        let myText = Modulo.fetchQ.data['/components/embeddedexampleslib.html'];
        //console.log('this si keys', Object.keys(Modulo.fetchQ.data));
        //console.log('this si myText', myText);
        const componentTexts = {};
        if (!myText) {
            console.error('ERROR: Could not load own text :(');
            myText = '';
        }
        let name = '';
        let currentComponent = '';
        let inTestSuite = false;
        for (const line of myText.split('\n')) {
            const lower = line.toLowerCase();
            if (lower.startsWith('</component>')) {
                componentTexts[name] = currentComponent;
                currentComponent = '';
                name = null;
            } else if (lower.startsWith('<component')) {
                name = line.split(' name="')[1].split('"')[0];
            } else if (lower.startsWith('<testsuite')) {
                inTestSuite = true;
            } else if (lower.includes('</testsuite>')) {
                inTestSuite = false;
            } else if (name && !inTestSuite) {
                currentComponent += line + '\n';
            }
        }
        script.exports.componentTexts = componentTexts;
    
return {  setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["x648bme"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    script.exports.title = "ModuloNews";

return {  setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["xa49eup"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    function prepareCallback() {
        const calcResult = (state.perc / 100) * state.total;
        return { calcResult };
    }

return { "prepareCallback": typeof prepareCallback !== "undefined" ? prepareCallback : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><style>
docseg-Templating_PrepareCallback input { display: inline; width: 25px }
</style><style>
docseg-Templating_Escaping .msgcontent {
        background: #999;
        padding: 10px;
        margin: 10px;
    }
</style><style>
/* ...and any CSS here! */
docseg-Tutorial_P1 strong {
    color: blue;
}
docseg-Tutorial_P1 .neat {
    font-variant: small-caps;
}
docseg-Tutorial_P1 { /* styles the entire component */
    display: inline-block;
    background-color: cornsilk;
    padding: 5px;
    box-shadow: 10px 10px 0 0 turquoise;
}
</style><style>
docseg-Tutorial_P3_state_demo {
        font-size: 0.8rem;
    }
</style><style>
mws-Section Section {
            position: relative;
        }
mws-Section h2 {
            font-weight: bold;
            color: var(--highlight-color);
            margin-bottom: 0;
        }
mws-Section a.secanchor {
            padding-top: 100px;
            color: var(--highlight-color);
            opacity: 0.3;
            display: block;
        }
mws-Section Section:hover .Section-helper {
            opacity: 1.0;
        }
    </style><script>"use strict";Modulo.assets.functions["nienp6"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

        // console.info('factory method of ErrorCauser');
        function countUp() {
            state.num++;
        }

        function makeError() {
            console.info('makeError callback happening');
            const a = 10;
            a(); // cause error
        }
    
return { "countUp": typeof countUp !== "undefined" ? countUp : undefined,
"makeError": typeof makeError !== "undefined" ? makeError : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><style>
mws-ErrorCauser * {
            color: orangered !important;
            background: black !important;
            border: blue 5px solid;
            padding: 10px;
        }
    </style><script>"use strict";Modulo.assets.functions["xpmo3gd"]= function (Modulo, factory, module, component, props, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'props') props = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }
let componentTexts = null;
let componentTexts2 = null;
let exCounter = 0; // global variable

//console.log('this is demo.js');

function _setupGlobalVariables() {
    // TODO: Refactor this, obvs
    // Get text from the two example component libraries
    //console.log('this is registered Modulo instances', Object.keys(Modulo.factoryInstances));
    try {
        componentTexts = Modulo.factoryInstances['eg-eg']
                .baseRenderObj.script.exports.componentTexts;
    } catch (err) {
        console.log('couldnt get componentTexts:', err);
        componentTexts = null;
    }

    try {
        componentTexts2 = Modulo.factoryInstances['docseg-docseg']
                .baseRenderObj.script.exports.componentTexts;
    } catch (err) {
        console.log('couldnt get componentTexts2:', err);
        componentTexts2 = null;
    }

    if (componentTexts) {
        componentTexts = Object.assign({}, componentTexts, componentTexts2);
    }
}

function tmpGetDirectives() {
    return [ 'script.codemirror' ];
}

function codemirrorMount({ el }) {
    //console.log('codeMirrorMount', { el });
    el.innerHTML = ''; // clear inner HTML before mounting
    const demoType = props.demotype || 'snippet';
    //_setupCodemirror(el, demoType, element, state);
    _setupCodemirrorSync(el, demoType, element, state);
}

function _setupCodemirrorSync(el, demoType, myElement, myState) {
      let readOnly = false;
      let lineNumbers = true;
      if (demoType === 'snippet') {
          readOnly = true;
          lineNumbers = false;
      }

      const conf = {
          value: myState.text,
          mode: 'django',
          theme: 'eclipse',
          indentUnit: 4,
          readOnly,
          lineNumbers,
      };

      if (demoType === 'snippet') {
          myState.showclipboard = true;
      } else if (demoType === 'minipreview') {
          myState.showpreview = true;
      }

      if (!myElement.codeMirrorEditor) {
          myElement.codeMirrorEditor = Modulo.globals.CodeMirror(el, conf);
      }
      myElement.codeMirrorEditor.refresh()
}

function _setupCodemirror(el, demoType, myElement, myState) {
    //console.log('_setupCodemirror DISABLED'); return; ///////////////////
    let expBackoff = 10;
    //console.log('this is codemirror', Modulo.globals.CodeMirror);
    const mountCM = () => {
        // TODO: hack, allow JS deps or figure out loader or something
        if (!Modulo.globals.CodeMirror) {
            expBackoff *= 2;
            setTimeout(mountCM, expBackoff); // poll again
            return;
        }

        let readOnly = false;
        let lineNumbers = true;
        if (demoType === 'snippet') {
            readOnly = true;
            lineNumbers = false;
        }

        const conf = {
            value: myState.text,
            mode: 'django',
            theme: 'eclipse',
            indentUnit: 4,
            readOnly,
            lineNumbers,
        };

        if (demoType === 'snippet') {
            myState.showclipboard = true;
        } else if (demoType === 'minipreview') {
            myState.showpreview = true;
        }

        if (!myElement.codeMirrorEditor) {
            myElement.codeMirrorEditor = Modulo.globals.CodeMirror(el, conf);
        }
        myElement.codeMirrorEditor.refresh()
        //myElement.rerender();
    };
    mountCM();
    return;
    const {isBackend} = Modulo;
    if (!isBackend) {
        // TODO: Ugly hack, need better tools for working with legacy
        setTimeout(mountCM, expBackoff);
    }
}

function selectTab(newTitle) {
    //console.log('tab getting selected!', newTitle);
    if (!element.codeMirrorEditor) {
        return; // not ready yet
    }
    const currentTitle = state.selected;
    state.selected = newTitle;
    for (const tab of state.tabs) {
        if (tab.title === currentTitle) { // save text back to state
            tab.text = element.codeMirrorEditor.getValue();
        } else if (tab.title === newTitle) {
            state.text = tab.text;
        }
    }
    element.codeMirrorEditor.setValue(state.text);
    doRun();
}

function doCopy() {
    let mod = Modulo.factoryInstances['x-x'].baseRenderObj;
    if (!mod || !mod.script || !mod.script.copyTextToClipboard) {
        console.log('no mod!');
    } else {
        mod.script.copyTextToClipboard(state.text);
    }
}

function initializedCallback() {
    // console.log('initializedCallback');
    if (componentTexts === null) {
        _setupGlobalVariables();
    }

    let text;
    state.tabs = [];
    if (props.fromlibrary) {
        if (!componentTexts) {
            componentTexts = false;
            throw new Error('Couldnt load:', props.fromlibrary)
        }

        const componentNames = props.fromlibrary.split(',');
        for (const title of componentNames) {
            if (title in componentTexts) {
                text = componentTexts[title].trim();
                text = text.replace(/&#39;/g, "'"); // correct double escape
                state.tabs.push({ text, title });
            } else {
                console.error('invalid fromlibrary:', title);
                console.log(componentTexts);
                return;
            }
        }
    } else if (props.text) {
        let title = props.ttitle || 'Example';
        text = props.text.trim();
        state.tabs.push({title, text});
        // hack -v
        if (props.text2) {
            title = props.ttitle2 || 'Example';
            text = props.text2.trim();
            state.tabs.push({title, text});
        }
        if (props.text3) {
            title = props.ttitle3 || 'Example';
            text = props.text3.trim();
            state.tabs.push({title, text});
        }
        //console.log('this is props', props);
    }

    const demoType = props.demotype || 'snippet';
    if (demoType === 'snippet') {
        state.showclipboard = true;
    } else if (demoType === 'minipreview') {
        state.showpreview = true;
    }

    state.text = state.tabs[0].text; // load first

    state.selected = state.tabs[0].title; // set first as tab title
    //setupShaChecksum();
    if (demoType === 'minipreview') {
        doRun();
    }

    const myElem = element;
    const myState = state;
    const {isBackend} = Modulo;
    return;
    if (!isBackend) {
        setTimeout(() => {
            const div = myElem.querySelector('.editor-wrapper > div');
            _setupCodemirror(div, demoType, myElem, myState);
        }, 0); // put on queue
    }
}

function doRun() {
    exCounter++;
    //console.log('There are ', exCounter, ' examples on this page. Gee!')
    const namespace = `e${exCounter}g${state.nscounter}`; // TODO: later do hot reloading using same loader
    state.nscounter++;
    const attrs = { src: '', namespace };
    const tagName = 'Example';

    if (element.codeMirrorEditor) {
        state.text = element.codeMirrorEditor.getValue(); // make sure most up-to-date
    }
    let componentDef = state.text;
    componentDef = `<component name="${tagName}">\n${componentDef}\n</component>`;
    const loader = new Modulo.Loader(null, { attrs } );
    loader.loadString(componentDef);
    const fullname = `${namespace}-${tagName}`;
    const factory = Modulo.factoryInstances[fullname];
    state.preview = `<${fullname}></${fullname}>`;

    // Hacky way to mount, required due to buggy dom resolver
    const {isBackend} = Modulo;
    if (!isBackend) {
        setTimeout(() => {
            const div = element.querySelector('.editor-minipreview > div');
            if (div) {
                div.innerHTML = state.preview;
            } else {
                console.log('warning, cant update minipreview', div);
            }
        }, 0);
    }
}

function countUp() {
    // TODO: Remove this when resolution context bug is fixed so that children
    // no longer can reference parents
    console.count('PROBLEM: Child event bubbling to parent!');
}

function doFullscreen() {
    document.body.scrollTop = document.documentElement.scrollTop = 0;
    if (state.fullscreen) {
        state.fullscreen = false;
        document.querySelector('html').style.overflow = "auto";
        if (element.codeMirrorEditor) {
            element.codeMirrorEditor.refresh()
        }
    } else {
        state.fullscreen = true;
        const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
        const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

        // TODO: way to share variables in CSS
        if (vw > 768) {
              document.querySelector('html').style.overflow = "hidden";
              if (element.codeMirrorEditor) {
                  element.codeMirrorEditor.refresh()
              }
        }
    }
    if (element.codeMirrorEditor) {
        //element.codeMirrorEditor.refresh()
    }
}

/*
function previewspotMount({ el }) {
    element.previewSpot = el;
    if (!element.isMounted) {
        doRun(); // mount after first render
    }
}


function setupShaChecksum() {
    console.log('setupShaChecksum DISABLED'); return; ///////////////////

    let mod = Modulo.factoryInstances['x-x'].baseRenderObj;
    if (Modulo.isBackend && state && state.text.includes('$modulojs_sha384_checksum$')) {
        if (!mod || !mod.script || !mod.script.getVersionInfo) {
            console.log('no mod!');
        } else {
            const info = mod.script.getVersionInfo();
            const checksum = info.checksum || '';
            state.text = state.text.replace('$modulojs_sha384_checksum$', checksum)
            element.setAttribute('text', state.text);
        }
    }
}
*/

/*
const component = factory.createTestElement();
component.remove()
console.log(component);
element.previewSpot.innerHTML = '';
element.previewSpot.appendChild(component);
*/


return { "_setupGlobalVariables": typeof _setupGlobalVariables !== "undefined" ? _setupGlobalVariables : undefined,
"tmpGetDirectives": typeof tmpGetDirectives !== "undefined" ? tmpGetDirectives : undefined,
"codemirrorMount": typeof codemirrorMount !== "undefined" ? codemirrorMount : undefined,
"_setupCodemirrorSync": typeof _setupCodemirrorSync !== "undefined" ? _setupCodemirrorSync : undefined,
"_setupCodemirror": typeof _setupCodemirror !== "undefined" ? _setupCodemirror : undefined,
"selectTab": typeof selectTab !== "undefined" ? selectTab : undefined,
"doCopy": typeof doCopy !== "undefined" ? doCopy : undefined,
"initializedCallback": typeof initializedCallback !== "undefined" ? initializedCallback : undefined,
"doRun": typeof doRun !== "undefined" ? doRun : undefined,
"countUp": typeof countUp !== "undefined" ? countUp : undefined,
"doFullscreen": typeof doFullscreen !== "undefined" ? doFullscreen : undefined,
"previewspotMount": typeof previewspotMount !== "undefined" ? previewspotMount : undefined,
"setupShaChecksum": typeof setupShaChecksum !== "undefined" ? setupShaChecksum : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><style>mws-Demo .demo-wrapper.demo-wrapper__minipreview .CodeMirror {
    height: 200px;
}

mws-Demo .demo-wrapper.demo-wrapper__clipboard .CodeMirror {
    height: auto;
}

mws-Demo .demo-wrapper.demo-wrapper__clipboard .CodeMirror * {
    font-family: monospace;
    font-size: 1rem;
}

mws-Demo .demo-wrapper.demo-wrapper__minipreview .CodeMirror * {
    font-family: monospace;
    font-size: 14px;
}

mws-Demo .demo-wrapper.demo-wrapper__fullscreen .CodeMirror {
    height: 87vh;
}
mws-Demo .demo-wrapper.demo-wrapper__fullscreen .CodeMirror * {
    font-family: monospace;
    font-size: 16px;
}

mws-Demo .demo-wrapper {
    position: relative;
    display: block;
    width: 100%;
}

mws-Demo .Main--fluid  .demo-wrapper.demo-wrapper__minipreview   {
    /* Make look better in Docs */
    max-width: 900px;
}
mws-Demo .Main--fluid  .demo-wrapper.demo-wrapper__minipreview.demo-wrapper__fullscreen  {
    /* ...except if full screen */
    max-width: 100vw;
}

mws-Demo .demo-wrapper.demo-wrapper__fullscreen {
    position: absolute;
    display: block;
    width: 100vw;
    height: 100vh;
    z-index: 100;
    top: 0;
    left: 0;
    box-sizing: border-box;
    padding: 20px;
    background: white;
}

/* No tabs sitch: */
mws-Demo .demo-wrapper__notabs .editor-minipreview {
    margin-top: 40px;
    margin-left: 5px;
    border: 1px solid #999;
    height: 160px;
}

mws-Demo .demo-wrapper__fullscreen.demo-wrapper__notabs .editor-minipreview {
    margin-top: 65px;
}

mws-Demo .editor-toolbar {
    position: absolute;
    z-index: 3;
    display: flex;
    width: auto;
    /*right: -70px;*/
    right: 30px;
    top: 0;
    height: 35px;
    padding: 2px;
    border: #ddd 1px solid;
}



mws-Demo .demo-wrapper__fullscreen .editor-toolbar {
    height: 60px;
    padding: 10px;
}


mws-Demo .demo-wrapper__minipreview  .editor-wrapper {
    width: 78%;
    border: 1px solid black;
}
mws-Demo .Main--fluid  .demo-wrapper__minipreview  .editor-wrapper {
}

mws-Demo .demo-wrapper.demo-wrapper__clipboard .editor-wrapper {
    border: 1px dotted #ddd;
    width: 100%;
}

mws-Demo .demo-wrapper__minipreview.demo-wrapper__fullscreen .editor-wrapper {
    border: 5px solid black;
    border-radius: 1px 8px 1px 8px;
    border-bottom-width: 1px;
    border-right-width: 1px;
}

mws-Demo .editor-minipreview {
    border: 1px solid black;
    border-radius: 1px;
    background: #eee;
    padding: 5px;
    border-left: none;
    width: 200px;
    height: 200px;
    overflow-y: auto;
}
mws-Demo .editor-minipreview > div > * > input {
  max-width: 175px;
}

mws-Demo .demo-wrapper__fullscreen .editor-minipreview {
    width: 30vw;
    height: auto;
    border: 1px solid black;
    margin: 20px;
    padding: 30px;
    border: 5px solid black;
    border-radius: 1px 8px 1px 8px;
    border-bottom-width: 1px;
    border-right-width: 1px;
}

mws-Demo .side-by-side-panes {
    display: flex;
    justify-content: space-between;
}

mws-Demo .TabNav {
    /*border-bottom: 1px dotted var(--highlight-color);*/
    width: 100%;
}


mws-Demo .TabNav > ul {
    width: 100%;
    display: flex;
}

mws-Demo .TabNav-title {
    border: 2px solid black;
    border-top-width: 4px;
    /*border-bottom-width: 0;*/
    margin-bottom: -2px;
    border-radius: 8px 8px 0 0;
    background: white;
    min-width: 10%;
    box-shadow: 0 0 0 0 var(--highlight-color);
    transition: box-shadow 0.3s,
                border-color 0.2s;
}

mws-Demo .TabNav-title a,
mws-Demo .TabNav-title a:visited,
mws-Demo .TabNav-title a:active {
    text-decoration: none;
    color: black;
    display: block;
    padding: 5px;
    font-weight: bold;
    cursor: pointer;
    font-size: 1.1rem;
}

mws-Demo .TabNav-title:hover {
    border-color: var(--highlight-color);
}

mws-Demo .TabNav-title--selected {
    border-color: var(--highlight-color);
    background: var(--highlight-color);
    box-shadow: 0 0 0 8px var(--highlight-color);
    border-radius: 8px 8px 8px 8px;
}
mws-Demo .TabNav-title--selected a {
    color: white !important;
}


@media (max-width: 992px) {
mws-Demo .TabNav > ul {
        flex-wrap: wrap;
        justify-content: flex-start;
    }
}
@media (max-width: 768px) {
mws-Demo .TabNav-title {
        padding: 7px;
    }
}



@media (max-width: 768px) {
mws-Demo .demo-wrapper.demo-wrapper__fullscreen {
        position: relative;
        display: block;
        width: 100vw;
        height: auto;
        z-index: 1;
    }
}


@media (max-width: 768px) {
mws-Demo .editor-toolbar {
        position: static;
        padding: 10px;
        margin: 20px;
        height: 60px;
        font-size: 1.1rem;
    }
mws-Demo .demo-wrapper__fullscreen .editor-toolbar {
        margin: 5px;
        height: 60px;
        padding: 5px;
        display: flex;
        justify-content: flex-end;
    }
}


@media (max-width: 768px) {
mws-Demo .side-by-side-panes {
        display: block;
    }
}

@media (max-width: 768px) {
mws-Demo .editor-minipreview {
        width: 100%;
    }
mws-Demo .demo-wrapper__fullscreen .editor-minipreview {
        width: 90%;
    }
}


@media (min-width: 768px) {
mws-Demo .demo-wrapper__minipreview.demo-wrapper__fullscreen .editor-wrapper {
        height: auto;
        width: 70vw;
        min-height: 87vh;
    }
}


@media (max-width: 768px) {
mws-Demo .editor-wrapper {
        width: 100%;
        border: 1px solid black;
    }
mws-Demo .demo-wrapper__fullscreen .editor-wrapper {
        width: 100%;
    }
}

</style><script>"use strict";Modulo.assets.functions["19ln1d0"]= function (Modulo, factory, module, component, props, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'props') props = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    function _child(label, hash, keywords=[], filepath=null) {
        if (!hash) {
            hash = label.toLowerCase()
        }
        if (hash.endsWith('.html') && filepath === null) {
            filepath = hash;
        }
        return {label, hash, keywords, filepath};
    }
    let componentTexts;
    try {
        //console.log('this is', Object.keys(Modulo.factoryInstances));
        //console.log('this is', Modulo.factoryInstances);
        componentTexts = Modulo.factoryInstances['eg-eg'].baseRenderObj.script.exports.componentTexts;
    } catch {
        console.log('couldnt get componentTexts');
        componentTexts = {};
    }
    script.exports.menu = [
        {
            label: 'Table of Contents',
            filename: '/docs/',
        },

        {
            label: 'Tutorial',
            filename: '/docs/tutorial_part1.html',
            children: [
                _child('Part 1: Components, CParts, and Loading', '/docs/tutorial_part1.html', ['cdn', 'module-embed', 'components', 'cparts', 'template', 'style', 'html & css']),
                _child('Part 2: Props, Templating, and Building', '/docs/tutorial_part2.html', ['props', 'template variables', 'template filters', 'modulo console command', 'build', 'hash']),
                _child('Part 3: State, Directives, and Scripting', '/docs/tutorial_part3.html', ['state', 'directives', 'data props', 'state.bind', 'data types', 'events', 'basic scripting']),
            ],
        },

        {
            label: 'Templating',
            filename: '/docs/templating.html',
            children: [
                _child('Templates', null, ['templating philosophy', 'templating overview']),
                _child('Variables', null, ['variable syntax', 'variable sources', 'cparts as variables']),
                _child('Filters', null, ['filter syntax', 'example filters']),
                _child('Tags', null, ['template-tag syntax', 'example use of templatetags']),
                _child('Comments', null, ['syntax', 'inline comments', 'block comments']),
                _child('Escaping', null, ['escaping HTML', 'safe filter', 'XSS injection protection']),
            ],
        },

        {
            label: 'Template Reference',
            filename: '/docs/templating-reference.html',
            children: [
                _child('Built-in Template Tags', 'templatetags', [
                    'if', 'elif', 'else', 'endif', 'for', 'empty', 'endfor',
                    'operators', 'in', 'not in', 'is', 'is not', 'lt', 'gt',
                    'comparison', 'control-flow',
                ]),
                _child('Built-in Filters', 'filters', [
                    'add', 'allow', 'capfirst', 'concat', 'default',
                    'divisibleby', 'escapejs', 'first', 'join', 'json', 'last',
                    'length', 'lower', 'number', 'pluralize', 'subtract',
                    'truncate', 'renderas', 'reversed', 'upper',
                ]),
            ],
        },

        {
            label: 'CParts',
            filename: '/docs/cparts.html',
            children: [
                _child('Props', 'props', ['accessing props', 'defining props',
                                    'setting props', 'using props']),
                _child('Template', 'template', ['custom template', 'templating engine']),
                _child('State', 'state', ['state definition', 'state data types',
                                'json', 'state variables', 'state.bind directive']),
                _child('Script', 'script', ['javascript', 'events', 'computed properties',
                                'static execution', 'custom lifecycle methods',
                                    'script callback execution context', 'script exports']),
                _child('Style', 'style', ['CSS', 'styling', ':host', 'shadowDOM']),
                _child('Component', 'component', ['name', 'innerHTML', 'patches', 'reconciliation',
                                    'rendering mode', 'manual rerender', 'shadow',
                                    'vanish', 'vanish-into-document', 'component.event',
                                    'component.slot', 'component.dataProp']),
                //_child('Module'),
            ],
        },

        {
            label: 'Lifecycle',
            filename: '/docs/lifecycle.html',
            children: [
                _child('Lifecycle phases', 'phases',
                    ['lifestyle phases', 'lifestyle phase groups',
                     'load', 'factory', 'prepare', 'initialized',
                     'render', 'reconcile', 'update',
                     'event', 'eventCleanup', 'hooking into lifecycle',
                     'lifecycle callbacks', 'script tag callbacks']),
                _child('Factory lifecycle', 'factory',
                    ['renderObj', 'baseRenderObj', 'loadObj',
                     'dependency injection', 'middleware']),
                _child('renderObj', 'renderobj',
                    ['renderObj', 'baseRenderObj', 'loadObj',
                     'dependency injection', 'middleware']),
            ],
        },

        {
            label: 'Directives',
            filename: '/docs/directives.html',
            children: [
                _child('Directives', 'directives',
                    ['built-in directives', 'directive shortcuts',
                     'custom directives', 'refs', 'accessing dom',
                     'escape hatch', 'mount callback', 'unmount callback']),
                _child('Custom directives', 'custom'),
                _child('Built-in directives', 'builtin'),
            ],
        },

        /*
        {
            label: 'API & Extension',
            filename: '/docs/api.html',
            children: [
                _child('Custom CParts', 'cparts'),
                _child('CPart Spares', 'spares'),
                _child('Custom Templating', 'template'),
                _child('Custom Filters', 'customfilters'),
                _child('Custom Template Tags', 'customtags'),
                _child('Custom Template Syntax', 'customtags'),
                _child('ModRec', 'modrec'),
                _child('DOMCursor', 'cursor'),
            ],
        },
        */

        {
            label: 'Example Library',
            filename: '/docs/example-library.html',
            children: Object.keys(componentTexts).map(name => _child(name)),
        },

        {
            label: 'Project Info',
            filename: '/docs/project-info.html',
            children: [
                _child('FAQ', 'faq'),
                _child('Framework Design Philosophy', 'philosophy'),
            ],
        },
    ];

    function initializedCallback() {
        const { path, showall } = props;
        state.menu = script.exports.menu.map(o => Object.assign({}, o)); // dupe
        for (const groupObj of state.menu) {
            if (showall) {
                groupObj.active = true;
            }
            if (groupObj.filename && path && groupObj.filename.endsWith(path)) {
                groupObj.active = true;
            }
        }
    }

return { "_child": typeof _child !== "undefined" ? _child : undefined,
"initializedCallback": typeof initializedCallback !== "undefined" ? initializedCallback : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><style>
mws-DocSidebar li {
      margin-left: 20px;
  }
  /*
mws-DocSidebar li.ginactive > ul::before,
mws-DocSidebar li.gactive > ul::before {
      content: ' - ';
      background: var(--highlight-color);
      color: white;
      text-decoration: none;
  }
  */
mws-DocSidebar li.ginactive > a::before {
      content: '+ ';
  }
</style><style>
mws-CodeExample .toolbar {
            display: flex;
            justify-content: space-between;
        }
mws-CodeExample .toolbar > button {
            border: 2px solid black;
            border-top-width: 1px;
            border-bottom-width: 3px;
            border-radius: 3px;
            background: white;
            font-weight: lighter;
            text-transform: uppercase;
        }
mws-CodeExample .toolbar > button:active {
            border-top-width: 3px;
            border-bottom-width: 1px;
        }
mws-CodeExample .toolbar > button:hover {
            box-shadow: 0 0 2px var(--highlight-color); /* extremely subtle shadow */
        }
mws-CodeExample .split > div:last-child {
            padding: 5px;
            background: whiteSmoke;
        }
mws-CodeExample .split > div:first-child{
            border: 1px solid black;
            /*overflow-y: scroll;*/
        }

mws-CodeExample .preview-wrapper {
            margin-top: 4px;
            padding: 5px;
            padding-left: 20px;
            padding-right: 20px;
            border: 1px solid black;
        }

mws-CodeExample .split > div > textarea {
            width: 100%;
            min-height: 10px;
        }
mws-CodeExample .split {
            display: grid;
            grid-template-columns: 2fr 1fr;
        }
@media (max-width: 992px) {
mws-CodeExample .split { display: block; }
        }
    </style><script>"use strict";Modulo.assets.functions["ki6eec"]= function (Modulo, factory, module, component, template, style, props, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'style') style = value; if (name === 'props') props = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

        let egTexts = null;
        try {
            if ('eg-eg' in Modulo.factoryInstances) {
                egTexts = Modulo.factoryInstances['eg-eg']
                    .baseRenderObj.script.exports.componentTexts;
            }
        } catch {
            console.log('couldnt get egTexts');
        }

        let exCounter = 0; // global variable
        //console.log('gettin script tagged');
        /* Configure loader: */
        function initializedCallback() {
            //console.log('hey i am getting initialized wow');
            //console.log('initialized callback', element.innerHTML);
            if (Modulo.isBackend) {
                let html;
                if (egTexts && props.cname) {
                    Modulo.assert(props.cname in egTexts, `${props.cname} not found`);
                    html = egTexts[props.cname];
                } else {
                    html = (element.innerHTML || '').trim();
                    html = html.replace(/([\w\[\]\._-]+):="(\w+)"/, '$1:=$2'); // clean up due to DOM
                }

                if (props.textsrc) {
                    const html = Modulo.require('fs')
                        .readFileSync('./docs-src/' + props.textsrc, 'utf8');
                    element.setAttribute('text', html);
                } else if (html && !element.getAttribute('text')) {
                    element.setAttribute('text', html);
                }
            }
        }

        function previewspotMount({el}) {
            element.previewSpot = el.firstElementChild;
            run(); // mount after first render
        }

        function codemirrorMount({el}) {
            if (Modulo.globals.CodeMirror) {
                //console.log('this is props', props);
                // TODO: Debug this, should not use textarea, should not need
                // extra refreshes or anything
                const cm = CodeMirror.fromTextArea(el, {
                    lineNumbers: true,
                    mode: 'django',
                    theme: 'eclipse',
                    indentUnit: 4,
                });
                element.codeMirrorEditor = cm;
                window.cm = cm;

                const height = props.vsize ? Number(props.vsize) : 170;
                cm.setValue('');
                cm.setSize(null, height);
                cm.refresh();

                let text = props.text.trim();
                text = text.replace(/&#39;/g, "'"); // correct double escape
                cm.setValue(text);
                setTimeout(() => {
                    cm.setValue(text);
                    cm.setSize(null, height);
                    cm.refresh();
                }, 1);
                el.setAttribute('modulo-ignore', 'y');
            } else {
                //console.log('Code mirror not found'); // probably SSG
            }
        }

        function run() {
            if (!Modulo.globals.CodeMirror) {
                return;
            }
            exCounter++;
            //console.log('There are ', exCounter, ' examples on this page. Gee!')
            const namespace = `e${exCounter}g${state.nscounter}`; // TODO: later do hot reloading using same loader
            state.nscounter++;
            const loadOpts = {src: '', namespace};
            const loader = new Modulo.Loader(null, {options: loadOpts});
            const tagName = 'Example';
            let text = element.codeMirrorEditor.getValue();
            text = `<template mod-component="${tagName}">${text}</template>`;
            //console.log('Creating component from text:', text)
            loader.loadString(text);
            const tag = `${namespace}-${tagName}`;
            let extraPropsStr = '';
            /*
            const extraProps =  props.extraprops ? JSON.parse(props.extraprops) : {};
            for (const [key, value] of Object.entries(extraProps)) {
                const escValue = value.replace(/"/g, , '&quot;');
                extraPropsStr += ` ${key}="${escValue}"`;
            }
            */

            const preview = `<${tag}${extraPropsStr}></${tag}>`;
            element.previewSpot.innerHTML = preview;
            //state.preview = preview;
            //document.querySelector('#previewSpot').innerHTML = preview;
            //console.log('adding preview', preview);
        }
    
return { "initializedCallback": typeof initializedCallback !== "undefined" ? initializedCallback : undefined,
"previewspotMount": typeof previewspotMount !== "undefined" ? previewspotMount : undefined,
"codemirrorMount": typeof codemirrorMount !== "undefined" ? codemirrorMount : undefined,
"run": typeof run !== "undefined" ? run : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["xnjq9ng"]= function (CTX, G){
var OUT=[];
OUT.push("<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf8\" />\n    <title>"); // "<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf8\" />\n    <title>"
OUT.push(G.escapeHTML(CTX.props.pagetitle)); // "props.pagetitle"
OUT.push(" - modulojs.org</title>\n    <link rel=\"stylesheet\" href=\"/css/style.css\" />\n    <link rel=\"icon\" type=\"image/png\" href=\"/img/mono_logo.png\" />\n    <!-- Moving this to individual pages for faster / blocking load, at least for now: -->\n    <!--<script src=\"/js/codemirror_5.63.0/codemirror_bundled.js\"></script>-->\n    <!--<link rel=\"stylesheet\" href=\"/js/codemirror_5.63.0/codemirror_bundled.css\" />-->\n</head>\n<body>\n\n<div [component.slot]=\"above-navbar\">\n</div>\n\n<nav class=\"Navbar\">\n    <a href=\"/index.html\"><img src=\"/img/mono_logo.png\" style=\"height:70px\" alt=\"Modulo\" /></a>\n    <ul>\n        <li>\n            <a href=\"/index.html#about\" "); // "- modulojs.org</title>\n    <link rel=\"stylesheet\" href=\"/css/style.css\" />\n    <link rel=\"icon\" type=\"image/png\" href=\"/img/mono_logo.png\" />\n    <!-- Moving this to individual pages for faster / blocking load, at least for now: -->\n    <!--<script src=\"/js/codemirror_5.63.0/codemirror_bundled.js\"></script>-->\n    <!--<link rel=\"stylesheet\" href=\"/js/codemirror_5.63.0/codemirror_bundled.css\" />-->\n</head>\n<body>\n\n<div [component.slot]=\"above-navbar\">\n</div>\n\n<nav class=\"Navbar\">\n    <a href=\"/index.html\"><img src=\"/img/mono_logo.png\" style=\"height:70px\" alt=\"Modulo\" /></a>\n    <ul>\n        <li>\n            <a href=\"/index.html#about\""
if (CTX.props.navbar === "about") { // "if props.navbar == \"about\""
OUT.push("class=\"Navbar--selected\""); // "class=\"Navbar--selected\""
} // "endif"
OUT.push(">About</a>\n        </li>\n        <li>\n            <a href=\"/start.html\" "); // ">About</a>\n        </li>\n        <li>\n            <a href=\"/start.html\""
if (CTX.props.navbar === "start") { // "if props.navbar == \"start\""
OUT.push("class=\"Navbar--selected\""); // "class=\"Navbar--selected\""
} // "endif"
OUT.push(">Start</a>\n        </li>\n        <li>\n            <a href=\"/docs/\" "); // ">Start</a>\n        </li>\n        <li>\n            <a href=\"/docs/\""
if (CTX.props.navbar === "docs") { // "if props.navbar == \"docs\""
OUT.push("class=\"Navbar--selected\""); // "class=\"Navbar--selected\""
} // "endif"
OUT.push(">Docs</a>\n        </li>\n    </ul>\n\n    <div class=\"Navbar-rightInfo\">\n        "); // ">Docs</a>\n        </li>\n    </ul>\n\n    <div class=\"Navbar-rightInfo\">"
if (CTX.script.exports.version) { // "if script.exports.version"
OUT.push("\n            v: "); // "v:"
OUT.push(G.escapeHTML(CTX.script.exports.version)); // "script.exports.version"
OUT.push("<br />\n            SLOC: "); // "<br />\n            SLOC:"
OUT.push(G.escapeHTML(CTX.script.exports.sloc)); // "script.exports.sloc"
OUT.push(" lines<br />\n            <a href=\"https://github.com/michaelpb/modulo/\">github</a> | \n            <a href=\"https://npmjs.com/michaelpb/modulo/\">npm</a> \n        "); // "lines<br />\n            <a href=\"https://github.com/michaelpb/modulo/\">github</a> | \n            <a href=\"https://npmjs.com/michaelpb/modulo/\">npm</a>"
} else { // "else"
OUT.push("\n            <a href=\"https://github.com/michaelpb/modulo/\">Source Code\n                <br />\n                (on GitHub)\n            </a>\n        "); // "<a href=\"https://github.com/michaelpb/modulo/\">Source Code\n                <br />\n                (on GitHub)\n            </a>"
} // "endif"
OUT.push("\n    </div>\n</nav>\n\n"); // "</div>\n</nav>"
if (CTX.props.docbarselected) { // "if props.docbarselected"
OUT.push("\n    <main class=\"Main Main--fluid Main--withSidebar\">\n        <aside class=\"TitleAside TitleAside--navBar\" >\n            <h3><span alt=\"Lower-case delta\">%</span></h3>\n            <nav class=\"TitleAside-navigation\">\n                <h3>Documentation</h3>\n                <mws-DocSidebar path=\""); // "<main class=\"Main Main--fluid Main--withSidebar\">\n        <aside class=\"TitleAside TitleAside--navBar\" >\n            <h3><span alt=\"Lower-case delta\">%</span></h3>\n            <nav class=\"TitleAside-navigation\">\n                <h3>Documentation</h3>\n                <mws-DocSidebar path=\""
OUT.push(G.escapeHTML(CTX.props.docbarselected)); // "props.docbarselected"
OUT.push("\"></mws-DocSidebar>\n            </nav>\n        </aside>\n        <aside style=\"border: none\" [component.slot]>\n        </aside>\n    </main>\n"); // "\"></mws-DocSidebar>\n            </nav>\n        </aside>\n        <aside style=\"border: none\" [component.slot]>\n        </aside>\n    </main>"
} else { // "else"
OUT.push("\n    <main class=\"Main\" [component.slot]>\n    </main>\n"); // "<main class=\"Main\" [component.slot]>\n    </main>"
} // "endif"
OUT.push("\n\n<footer>\n    <main>\n        (C) 2022 - Michael Bethencourt - Documentation under LGPL 3.0\n    </main>\n</footer>\n\n</body>\n</html>\n"); // "<footer>\n    <main>\n        (C) 2022 - Michael Bethencourt - Documentation under LGPL 3.0\n    </main>\n</footer>\n\n</body>\n</html>"

return OUT.join("");
};</script><modulo>
    <load namespace="x" src="/components/layouts.html"> </load>
</modulo><meta charset="utf8"><title>Templating Reference - modulojs.org</title><link rel="stylesheet" href="/css/style.css"><link rel="icon" type="image/png" href="/img/mono_logo.png"><script>"use strict";Modulo.assets.functions["pqput6"]= function (CTX, G){
var OUT=[];
OUT.push("\n        <a class=\"secanchor\" title=\"Click to focus on this section.\" id=\""); // "<a class=\"secanchor\" title=\"Click to focus on this section.\" id=\""
OUT.push(G.escapeHTML(CTX.props.name)); // "props.name"
OUT.push("\" name=\""); // "\" name=\""
OUT.push(G.escapeHTML(CTX.props.name)); // "props.name"
OUT.push("\" href=\"#"); // "\" href=\"#"
OUT.push(G.escapeHTML(CTX.props.name)); // "props.name"
OUT.push("\">#</a>\n        <h2>"); // "\">#</a>\n        <h2>"
OUT.push(G.escapeHTML(G.filters["safe"](CTX.component.originalHTML))); // "component.originalHTML|safe"
OUT.push("</h2>\n    "); // "</h2>"

return OUT.join("");
};</script><script>"use strict";Modulo.assets.functions["xvdjht9"]= function (CTX, G){
var OUT=[];
OUT.push("<div class=\"demo-wrapper\n        "); // "<div class=\"demo-wrapper"
if (CTX.state.showpreview) { // "if state.showpreview"
OUT.push("     demo-wrapper__minipreview"); // "demo-wrapper__minipreview"
} // "endif"
OUT.push("\n        "); // ""
if (CTX.state.showclipboard) { // "if state.showclipboard"
OUT.push("   demo-wrapper__clipboard  "); // "demo-wrapper__clipboard"
} // "endif"
OUT.push("\n        "); // ""
if (CTX.state.fullscreen) { // "if state.fullscreen"
OUT.push("      demo-wrapper__fullscreen "); // "demo-wrapper__fullscreen"
} // "endif"
OUT.push("\n        "); // ""
if (CTX.state.tabs.length === 1) { // "if state.tabs.length == 1"
OUT.push("demo-wrapper__notabs     "); // "demo-wrapper__notabs"
} // "endif"
OUT.push("\n    \">\n    "); // "\">"
if (CTX.state.tabs.length > 1) { // "if state.tabs.length gt 1"
OUT.push("\n        <nav class=\"TabNav\">\n            <ul>\n                "); // "<nav class=\"TabNav\">\n            <ul>"
var ARR1=CTX.state.tabs;for (var KEY in ARR1) {CTX. tab=ARR1[KEY]; // "for tab in state.tabs"
OUT.push("\n                    <li class=\"TabNav-title\n                        "); // "<li class=\"TabNav-title"
if (CTX.tab.title === CTX.state.selected) { // "if tab.title == state.selected"
OUT.push("\n                            TabNav-title--selected\n                        "); // "TabNav-title--selected"
} // "endif"
OUT.push("\n                    \"><a @click:=script.selectTab\n                            payload=\""); // "\"><a @click:=script.selectTab\n                            payload=\""
OUT.push(G.escapeHTML(CTX.tab.title)); // "tab.title"
OUT.push("\"\n                        >"); // "\"\n                        >"
OUT.push(G.escapeHTML(CTX.tab.title)); // "tab.title"
OUT.push("</a></li>\n                "); // "</a></li>"
} // "endfor"
OUT.push("\n            </ul>\n        </nav>\n    "); // "</ul>\n        </nav>"
} // "endif"
OUT.push("\n\n    <div class=\"editor-toolbar\">\n        <p style=\"font-size: 11px; width: 120px; margin-right: 10px; text-align: right;\n                    "); // "<div class=\"editor-toolbar\">\n        <p style=\"font-size: 11px; width: 120px; margin-right: 10px; text-align: right;"
if (!(CTX.state.fullscreen)) { // "if not state.fullscreen"
OUT.push(" display: none; "); // "display: none;"
} // "endif"
OUT.push("\">\n            <em>Note: This is meant for exploring features. Your work will not be saved.</em>\n        </p>\n\n        "); // "\">\n            <em>Note: This is meant for exploring features. Your work will not be saved.</em>\n        </p>"
if (CTX.state.showclipboard) { // "if state.showclipboard"
OUT.push("\n            <button class=\"m-Btn m-Btn--sm m-Btn--faded\"\n                    title=\"Copy this code\" @click:=script.doCopy>\n                Copy <span alt=\"Clipboard\">&#128203;</span>\n            </button>\n        "); // "<button class=\"m-Btn m-Btn--sm m-Btn--faded\"\n                    title=\"Copy this code\" @click:=script.doCopy>\n                Copy <span alt=\"Clipboard\">&#128203;</span>\n            </button>"
} // "endif"
OUT.push("\n\n        "); // ""
if (CTX.state.showpreview) { // "if state.showpreview"
OUT.push("\n            <button class=\"m-Btn\"\n                    title=\"Toggle full screen view of code\" @click:=script.doFullscreen>\n                "); // "<button class=\"m-Btn\"\n                    title=\"Toggle full screen view of code\" @click:=script.doFullscreen>"
if (CTX.state.fullscreen) { // "if state.fullscreen"
OUT.push("\n                    <span alt=\"Shrink\">&swarr;</span>\n                "); // "<span alt=\"Shrink\">&swarr;</span>"
} else { // "else"
OUT.push("\n                    <span alt=\"Go Full Screen\">&nearr;</span>\n                "); // "<span alt=\"Go Full Screen\">&nearr;</span>"
} // "endif"
OUT.push("\n            </button>\n            &nbsp;\n            <button class=\"m-Btn\"\n                    title=\"Run a preview of this code\" @click:=script.doRun>\n                Run <span alt=\"Refresh\">&#10227;</span>\n            </button>\n        "); // "</button>\n            &nbsp;\n            <button class=\"m-Btn\"\n                    title=\"Run a preview of this code\" @click:=script.doRun>\n                Run <span alt=\"Refresh\">&#10227;</span>\n            </button>"
} // "endif"
OUT.push("\n\n    </div>\n\n    <div class=\"side-by-side-panes\">\n        <div class=\"editor-wrapper\">\n            <div [script.codemirror] modulo-ignore>\n            </div>\n        </div>\n\n        "); // "</div>\n\n    <div class=\"side-by-side-panes\">\n        <div class=\"editor-wrapper\">\n            <div [script.codemirror] modulo-ignore>\n            </div>\n        </div>"
if (CTX.state.showpreview) { // "if state.showpreview"
OUT.push("\n            <div class=\"editor-minipreview\">\n                <div modulo-ignore>\n                    "); // "<div class=\"editor-minipreview\">\n                <div modulo-ignore>"
OUT.push(G.escapeHTML(G.filters["safe"](CTX.state.preview))); // "state.preview|safe"
OUT.push("\n                </div>\n            </div>\n        "); // "</div>\n            </div>"
} // "endif"
OUT.push("\n\n    </div>\n</div>\n\n"); // "</div>\n</div>"

return OUT.join("");
};</script><script>"use strict";Modulo.assets.functions["xgns1hl"]= function (Modulo, factory, module, component, template, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    function myinputMount(mountOptions) {
        element.inputRef = mountOptions.el;
        // Try uncommenting the following to see data:
        //console.log("myinputMount:", mountOptions);
    }
    function showInfo(el) {
        alert("Focusing on:" + String(element.inputRef));
        element.inputRef.focus();
    }

return { "myinputMount": typeof myinputMount !== "undefined" ? myinputMount : undefined,
"showInfo": typeof showInfo !== "undefined" ? showInfo : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["xff1c61"]= function (Modulo, factory, module, component, template, state, element, cparts){var script = { exports: {} };  function __set(name, value) { if (name === 'Modulo') Modulo = value; if (name === 'factory') factory = value; if (name === 'module') module = value; if (name === 'component') component = value; if (name === 'template') template = value; if (name === 'state') state = value; if (name === 'element') element = value; if (name === 'cparts') cparts = value; }

    Modulo.directiveShortcuts.push([/^%%%/, "script.example"]);
    // TODO: Fix this with "tmpGetDirectives"
    /*
    // Correct way below:
    function factoryCallback(partOptions, factory, loadObj)  {
        loadObj.component.directiveShortcuts.push([/^%%%/, "script.example"]);
    }
    */

    function exampleMount(info) {
        console.log("Mounting directive:", info);
        const {el, value, attrName, rawName} = info;
        el.textContent = `${attrName} ${value}`;
        el.onclick = () => alert(attrName + "ing " + value);
    }
    function exampleUnmount(info) {
        console.log("Unmounting directive:", info);
    }
    function toggle() {
        state.show = !state.show;
    }

return { "factoryCallback": typeof factoryCallback !== "undefined" ? factoryCallback : undefined,
"exampleMount": typeof exampleMount !== "undefined" ? exampleMount : undefined,
"exampleUnmount": typeof exampleUnmount !== "undefined" ? exampleUnmount : undefined,
"toggle": typeof toggle !== "undefined" ? toggle : undefined,
 setLocalVariable: __set, exports: script.exports}
};</script><script>"use strict";Modulo.assets.functions["x1ttadi3"]= function (CTX, G){
var OUT=[];
OUT.push("\n<ul>\n    "); // "<ul>"
var ARR0=CTX.state.menu;for (var KEY in ARR0) {CTX. linkGroup=ARR0[KEY]; // "for linkGroup in state.menu"
OUT.push("\n        <li class=\"\n            "); // "<li class=\""
if (CTX.linkGroup.children) { // "if linkGroup.children"
OUT.push("\n                "); // ""
if (CTX.linkGroup.active) { // "if linkGroup.active"
OUT.push("gactive"); // "gactive"
} else { // "else"
OUT.push("ginactive"); // "ginactive"
} // "endif"
OUT.push("\n            "); // ""
} // "endif"
OUT.push("\n            \"><a href=\""); // "\"><a href=\""
OUT.push(G.escapeHTML(CTX.linkGroup.filename)); // "linkGroup.filename"
OUT.push("\">"); // "\">"
OUT.push(G.escapeHTML(CTX.linkGroup.label)); // "linkGroup.label"
OUT.push("</a>\n            "); // "</a>"
if (CTX.linkGroup.active) { // "if linkGroup.active"
OUT.push("\n                "); // ""
if (CTX.linkGroup.children) { // "if linkGroup.children"
OUT.push("\n                    <ul>\n                    "); // "<ul>"
var ARR3=CTX.linkGroup.children;for (var KEY in ARR3) {CTX. childLink=ARR3[KEY]; // "for childLink in linkGroup.children"
OUT.push("\n                        <li><a href=\""); // "<li><a href=\""
if (CTX.childLink.filepath) { // "if childLink.filepath"
OUT.push(G.escapeHTML(CTX.childLink.filepath)); // "childLink.filepath"
} else { // "else"
OUT.push(G.escapeHTML(CTX.linkGroup.filename)); // "linkGroup.filename"
OUT.push("#"); // "#"
OUT.push(G.escapeHTML(CTX.childLink.hash)); // "childLink.hash"
} // "endif"
OUT.push("\">"); // "\">"
OUT.push(G.escapeHTML(CTX.childLink.label)); // "childLink.label"
OUT.push("</a>\n                        "); // "</a>"
if (CTX.props.showall) { // "if props.showall"
OUT.push("\n                            "); // ""
if (CTX.childLink.keywords.length > 0) { // "if childLink.keywords.length gt 0"
OUT.push("\n                                <span style=\"margin-left: 10px; color: #aaa\">(<em>Topics: "); // "<span style=\"margin-left: 10px; color: #aaa\">(<em>Topics:"
OUT.push(G.escapeHTML(G.filters["join"](CTX.childLink.keywords,", "))); // "childLink.keywords|join:', '"
OUT.push("</em>)</span>\n                            "); // "</em>)</span>"
} // "endif"
OUT.push("\n                        "); // ""
} // "endif"
OUT.push("\n                        </li>\n                    "); // "</li>"
} // "endfor"
OUT.push("\n                    </ul>\n                "); // "</ul>"
} // "endif"
OUT.push("\n            "); // ""
} // "endif"
OUT.push("\n        </li>\n    "); // "</li>"
} // "endfor"
OUT.push("\n\n\n    <!--\n    <li>\n        Other resources:\n\n        <ul>\n            <li>\n                <a href=\"/docs/faq.html\">FAQ</a>\n            <li title=\"Work in progress: Finalizing source code and methodically annotating entire file with extensive comments.\">\n                Literate Source*<br /><em>* Coming soon!</em>\n            </li>\n        </ul>\n\n    </li>\n    -->\n    <!--<a href=\"/literate/src/Modulo.html\">Literate source</a>-->\n</ul>\n"); // "<!--\n    <li>\n        Other resources:\n\n        <ul>\n            <li>\n                <a href=\"/docs/faq.html\">FAQ</a>\n            <li title=\"Work in progress: Finalizing source code and methodically annotating entire file with extensive comments.\">\n                Literate Source*<br /><em>* Coming soon!</em>\n            </li>\n        </ul>\n\n    </li>\n    -->\n    <!--<a href=\"/literate/src/Modulo.html\">Literate source</a>-->\n</ul>"

return OUT.join("");
};</script><script>"use strict";Modulo.assets.functions["x1hjj4av"]= function (CTX, G){
var OUT=[];
OUT.push("\n"); // ""
OUT.push("\n<input [script.myinput] />\n\n"); // "<input [script.myinput] />"
OUT.push("\n<button [component.event]click:=script.showInfo>\n    Click me\n</button>\n"); // "<button [component.event]click:=script.showInfo>\n    Click me\n</button>"

return OUT.join("");
};</script></head><body>


    
    
    
    
    <!-- Moving this to individual pages for faster / blocking load, at least for now: -->
    <!--<script src="/js/codemirror_5.63.0/codemirror_bundled.js"></script>-->
    <!--<link rel="stylesheet" href="/js/codemirror_5.63.0/codemirror_bundled.css" />-->



<div [component.slot]="above-navbar"></div>

<nav class="Navbar">
    <a href="/index.html"><img src="/img/mono_logo.png" style="height:70px" alt="Modulo"></a>
    <ul>
        <li>
            <a href="/index.html#about">About</a>
        </li>
        <li>
            <a href="/start.html">Start</a>
        </li>
        <li>
            <a href="/docs/" class="Navbar--selected">Docs</a>
        </li>
    </ul>

    <div class="Navbar-rightInfo">
        
            <a href="https://github.com/michaelpb/modulo/">Source Code
                <br>
                (on GitHub)
            </a>
        
    </div>
</nav>


    <main class="Main Main--fluid Main--withSidebar">
        <aside class="TitleAside TitleAside--navBar">
            <h3><span alt="Lower-case delta">%</span></h3>
            <nav class="TitleAside-navigation">
                <h3>Documentation</h3>
                <mws-docsidebar path="directives.html" modulo-original-html="">
<ul>
    
        <li class="
            
            "><a href="/docs/">Table of Contents</a>
            
        </li>
    
        <li class="
            
                ginactive
            
            "><a href="/docs/tutorial_part1.html">Tutorial</a>
            
        </li>
    
        <li class="
            
                ginactive
            
            "><a href="/docs/templating.html">Templating</a>
            
        </li>
    
        <li class="
            
                ginactive
            
            "><a href="/docs/templating-reference.html">Template Reference</a>
            
        </li>
    
        <li class="
            
                ginactive
            
            "><a href="/docs/cparts.html">CParts</a>
            
        </li>
    
        <li class="
            
                ginactive
            
            "><a href="/docs/lifecycle.html">Lifecycle</a>
            
        </li>
    
        <li class="
            
                gactive
            
            "><a href="/docs/directives.html">Directives</a>
            
                
                    <ul>
                    
                        <li><a href="/docs/directives.html#directives">Directives</a>
                        
                        </li>
                    
                        <li><a href="/docs/directives.html#custom">Custom directives</a>
                        
                        </li>
                    
                        <li><a href="/docs/directives.html#builtin">Built-in directives</a>
                        
                        </li>
                    
                    </ul>
                
            
        </li>
    
        <li class="
            
                ginactive
            
            "><a href="/docs/example-library.html">Example Library</a>
            
        </li>
    
        <li class="
            
                ginactive
            
            "><a href="/docs/project-info.html">Project Info</a>
            
        </li>
    


    <!--
    <li>
        Other resources:

        <ul>
            <li>
                <a href="/docs/faq.html">FAQ</a>
            <li title="Work in progress: Finalizing source code and methodically annotating entire file with extensive comments.">
                Literate Source*<br /><em>* Coming soon!</em>
            </li>
        </ul>

    </li>
    -->
    <!--<a href="/literate/src/Modulo.html">Literate source</a>-->
</ul>
</mws-docsidebar>
            </nav>
        </aside>
        <aside style="border: none" [component.slot]="">

<h1>Directives</h1>

<p><em>Directives</em> are one of the core features of Modulo. It allows for
callbacks to be triggered when a particular DOM element is "mounted" or first
appears in the DOM. It allows for your custom code to access references to DOM
nodes created after rendering.</p>

<mws-section name="directives" modulo-original-html="Introduction to directives">
        <a class="secanchor" title="Click to focus on this section." id="directives" name="directives" href="#directives">#</a>
        <h2>Introduction to directives</h2>
    </mws-section>

<blockquote><p><strong>Directives are like "refs"</strong> - Directives have
the same uses as Refs in <a href="https://reactjs.org/docs/refs-and-the-dom.html" target="_blank">React</a>: “Managing focus, text selection, or media
playback, triggering imperative animations, or integrating with third-party DOM
libraries.”</p></blockquote>

<p>Every directive has a name. Every directive is specified as an attribute on
the DOM element that you wish to gain access to, by enclosing the name in
square brackets. For example, the <em>State</em> CPart has the directive named
<code>bind</code>, making the full attribute be <code>[state.bind]</code>. Some
directives have shortcut names. For example, <code>[component.event]</code> can
be shortened to only a single at-sign, <code>@</code>.</p>

<p>Directives also have callback functions. Just like lifecycle callbacks, a
directive callback name is created by suffixing a string to the end of the name
of the directive. Unlike lifecycle callback functions, directive callback
functions end with <code>Mount</code> and <code>Unmount</code>.</p>

<h3>Built-in directives vs custom directives</h3>

<p>Modulo ships with a total of 4 built-in directives, defined by the built-in
<em>CParts</em> (1 from <em>State</em> and 3 from <em>Component</em>).
Typically, the built-in directives are all you need. However, just like with
lifecycle functions, the <em>Script</em> CPart also exposes the directive
interface to component developers. This is so that you can create custom
directives in a component to access the DOM after rendering.</p>


<mws-section name="builtin" modulo-original-html="Built-in directives">
        <a class="secanchor" title="Click to focus on this section." id="builtin" name="builtin" href="#builtin">#</a>
        <h2>Built-in directives</h2>
    </mws-section>

<p>Modulo ships with a total of 4 built-in directives, defined by the built-in
<em>CParts</em> (1 from <em>State</em> and 3 from <em>Component</em>).</p>

<ul>
    <li><code>[component.dataProp]</code> (<em>shortcut:</em> <code>:</code>) -
    Attach data to a DOM element's `.dataProp` object, which can be used to
    directly pass <code>renderObj</code> values as <em>Props</em> or
    events</li>

    <li><code>[component.event]</code> (<em>shortcut:</em> <code>@</code>) -
    Attach event listeners to DOM elements, and remove them when the DOM
    elements are removed. (For jQuery users, this is used for similar purposes
    as "live" (delegated) events, but is faster.)</li>

    <li><code>[component.slot]</code> - Reattach the original child elements
    that this component had when it was first mounted to a new DOM element.
    (For React users, this is similar to doing
    <code>{this.props.children}</code>.)</li>

    <li><code>[state.bind]</code> - Two-way binding with <em>State</em>
    data, with the key determined by the <code>name=</code> property of
    whatever it is attached to.</li>
</ul>


<p>Important directive facts: Directives are discovered during the
<code>reconcile</code> lifecycle phase when DOM reconciliation is occurring, and
invoked during the <code>update</code> phase. Note that they are independent
of the <em>Template</em> CPart: You can have a component that has no
<em>Template</em> but still may employ directives, e.g. if it generates HTML
contents some other way.</p>

<p>Not sure which to use? Short answer: Templates! Long answer: Directives deal
with direct DOM references, and thus are almost always messier to use. The <a href="/docs/templating.html">design philosophy of Modulo's templating
system</a> is to generate a string of HTML code as a purposeful limitation
during the <code>render</code> phase, and thus prevents this messiness with a
stricter structure.</p>


<div class="InfoBox">
    <h2>Directives and template variables</h2>

    <p>Never attempt to mix <em>Template</em> CPart variables with directives.
    Directives cannot access template variables, since directives are only are
    applied after the template is fully rendered and all template variables are
    already forgotten. As an example, consider the following code:</p>

<mws-demo text="
<Template>
    {% for athlete in state.team %}
        {# (HTML Attributes) #}
        {# Broken, will not work: #}
        <a href:=athlete.url>{{ athlete.name }}</a>

        {# Correct, will work: #}
        <a href=&quot;{{ athlete.url }}&quot;>{{ athlete.name }}</a>

        {# (Events) #}
        {# Also broken, will not work: #}
        <button @click:=athlete.myClickCallback>
            {{ athlete.name }}</button>

        {# Correct, will work: #}
        <button @click:=script.selectOne payload=&quot;{{ athlete.id }}&quot;>
            {{ athlete.name }}</button>
    {% endfor %}
</Template>
" modulo-original-html=""><div class="demo-wrapper
        
           demo-wrapper__clipboard  
        
        demo-wrapper__notabs     
    ">
    

    <div class="editor-toolbar">
        <p style="font-size: 11px; width: 120px; margin-right: 10px; text-align: right;
                     display: none; ">
            <em>Note: This is meant for exploring features. Your work will not be saved.</em>
        </p>

        
            <button class="m-Btn m-Btn--sm m-Btn--faded" title="Copy this code" @click:="script.doCopy">
                Copy <span alt="Clipboard">📋</span>
            </button>
        

        

    </div>

    <div class="side-by-side-panes">
        <div class="editor-wrapper">
            <div [script.codemirror]="" modulo-ignore=""><div class="CodeMirror cm-s-eclipse" translate="no"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" readonly="" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="bottom: 0px; width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: auto;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 50px; min-height: 350px; min-width: 660.016px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Template</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-tag">{%</span><span class="cm-null"> </span><span class="cm-keyword">for</span><span class="cm-null"> </span><span class="cm-variable">athlete</span><span class="cm-null"> </span><span class="cm-keyword">in</span><span class="cm-null"> </span><span class="cm-variable">state</span><span class="cm-null">.</span><span class="cm-property">team</span><span class="cm-null"> </span><span class="cm-tag">%}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">{# (HTML Attributes) #}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">{# Broken, will not work: #}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">href:</span>=<span class="cm-string">athlete.url</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag">{{</span><span class="cm-null"> </span><span class="cm-variable">athlete</span><span class="cm-null">.</span><span class="cm-property">name</span><span class="cm-null"> </span><span class="cm-tag">}}</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">{# Correct, will work: #}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">href</span>=<span class="cm-string">"</span><span class="cm-tag">{{</span><span class="cm-null"> </span><span class="cm-variable">athlete</span><span class="cm-null">.</span><span class="cm-property">url</span><span class="cm-null"> </span><span class="cm-tag">}}</span><span class="cm-string">"</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag">{{</span><span class="cm-null"> </span><span class="cm-variable">athlete</span><span class="cm-null">.</span><span class="cm-property">name</span><span class="cm-null"> </span><span class="cm-tag">}}</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">{# (Events) #}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">{# Also broken, will not work: #}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">button</span> <span class="cm-attribute">@click:</span>=<span class="cm-string">athlete.myClickCallback</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-tag">{{</span><span class="cm-null"> </span><span class="cm-variable">athlete</span><span class="cm-null">.</span><span class="cm-property">name</span><span class="cm-null"> </span><span class="cm-tag">}}</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">{# Correct, will work: #}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">button</span> <span class="cm-attribute">@click:</span>=<span class="cm-string">script.selectOne</span> <span class="cm-attribute">payload</span>=<span class="cm-string">"</span><span class="cm-tag">{{</span><span class="cm-null"> </span><span class="cm-variable">athlete</span><span class="cm-null">.</span><span class="cm-property">id</span><span class="cm-null"> </span><span class="cm-tag">}}</span><span class="cm-string">"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-tag">{{</span><span class="cm-null"> </span><span class="cm-variable">athlete</span><span class="cm-null">.</span><span class="cm-property">name</span><span class="cm-null"> </span><span class="cm-tag">}}</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-tag">{%</span><span class="cm-null"> </span><span class="cm-keyword">endfor</span><span class="cm-null"> </span><span class="cm-tag">%}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">Template</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 350px;"></div><div class="CodeMirror-gutters" style="display: none; height: 400px;"></div></div></div></div>
        </div>

        

    </div>
</div>

</mws-demo>

<blockquote>
    <p><strong>Why "payload"?</strong> Why does Modulo take this approach, vs
    something like React, that allows direct attachment of anonymous JavaScript
    functions? As any React developer knows by now, there are a lot of
    "footguns" (common mistakes) with attaching events like this, specifically
    because complexities with "this" context, anonymous functions, and bound
    functions with arguments can make introspection (e.g. interactive
    debugging) hard.</p>

    <p>The Modulo approach is always "DOM determines behavior".  Just by using
    "Inspect" in your browser's Developer Tools, you can examine or even modify
    the "payload" attribute while debugging event behavior. In other words,
    Modulo <em>tends to treat the DOM as the "source of truth"</em>, and thus
    derives it's behavior from properties on DOM elements.</p>
</blockquote>

    <p>The first attempt (HTML Attributes) uses a directive (<code>[component.dataProp]</code>, in
    this case using the colon <code>:</code> shortcut), in an attempt to "directly"
    attach the URL to href. The second attempt correctly uses the template variable
    with double curly braces to embed it as an actual HTML property.  The first
    attempt will fail because it fails to take into account that the directives
    will happen <em>after</em> rendering the template. That is, the resulting HTML
    will literally resemble something like this:
    “<code>&lt;a href:=athlete.url&gt;Steph Curry &lt;/a&gt;
    &lt;a href:=athlete.url&gt;Megan Rapinoe&lt;/a&gt;
    &lt;a href:=athlete.url&gt;Devante Adams&lt;/a&gt;</code>”.

    </p><p>In other words, the "athlete" variable <em>is a temporary Template
    variable in the for loop</em> (that is to say, not a variable in the
    <em>renderObj</em>), and will only be used at the templating step, and
    forgotten immediately after. Since directives are only invoked once
    templating is fully completed, there is no way to resolve the variable from
    the for loop.</p>


    <p>What is the proper use of the <code>[component.dataProp]</code>
    directive, you might ask? The proper use is for direct assignment or
    attachment of values that are not strings or numbers <em>at the top level
    of the renderObj</em>. Basically, anything that can't be conveniently
    serialized into a string attribute. The common usage is passing down
    complex nested data types as <code>Props</code> (i.e. without having to
    clutter the DOM and waste memory with a massive JSON object serialized as
    an attribute), or for attaching callbacks from the renderObj.</p>

    <p>We see such correct usage in the second (Events) "correct" example: It
    references <code>script.selectAthlete</code> which is at the global level.
    We can tell that it's at the global renderObj level since it starts with
    <code>script.</code>, referencing the contribution to the renderObj that
    was provided by the Script CPart. The issue with this, however, is that we
    won't know <em>which</em> button was clicked, since it references one
    universal <code>selectAthlete</code> function.
    This is solved by attaching some sort of ID reference to the DOM element as
    a "payload" so that the callback function knows which athlete was selected.
    This is the correct approach: It uses the DOM as a "source of truth" and is
    predictable in behavior, with no "hidden" functions getting attached.</p>

</div>




<mws-section name="custom" modulo-original-html="Custom directives">
        <a class="secanchor" title="Click to focus on this section." id="custom" name="custom" href="#custom">#</a>
        <h2>Custom directives</h2>
    </mws-section>

<p>A quick word of caution on custom directives: If you find yourself using
custom directives to do vanilla JS DOM manipulation often, you are probably
doing something wrong! They are meant as an "emergency escape hatch" to gain
access to the DOM underneath, and typically you only use them to integrate with
other libraries. The most common usage is mixing in older jQuery-style
libraries that require a reference to a DOM element. In general, it's when you
run into the limits of what Modulo is capable of doing.</p>

<p><strong>Example custom directives:</strong></p>

<mws-demo demotype="minipreview" text="
<Template>
{# [script.myinput] is a custom directive, defined below #}
<input [script.myinput] />

{# [component.event] is a built-in directive (shortcut is @) #}
<button [component.event]click:=script.showInfo>
    Click me
</button>
</Template>

<Script>
    function myinputMount(mountOptions) {
        element.inputRef = mountOptions.el;
        // Try uncommenting the following to see data:
        //console.log(&quot;myinputMount:&quot;, mountOptions);
    }
    function showInfo(el) {
        alert(&quot;Focusing on:&quot; + String(element.inputRef));
        element.inputRef.focus();
    }
</Script>
" modulo-original-html=""><div class="demo-wrapper
             demo-wrapper__minipreview
        
        
        demo-wrapper__notabs     
    ">
    

    <div class="editor-toolbar">
        <p style="font-size: 11px; width: 120px; margin-right: 10px; text-align: right;
                     display: none; ">
            <em>Note: This is meant for exploring features. Your work will not be saved.</em>
        </p>

        

        
            <button class="m-Btn" title="Toggle full screen view of code" @click:="script.doFullscreen">
                
                    <span alt="Go Full Screen">↗</span>
                
            </button>
            &nbsp;
            <button class="m-Btn" title="Run a preview of this code" @click:="script.doRun">
                Run <span alt="Refresh">⟳</span>
            </button>
        

    </div>

    <div class="side-by-side-panes">
        <div class="editor-wrapper">
            <div [script.codemirror]="" modulo-ignore=""><div class="CodeMirror cm-s-eclipse" translate="no"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="display: block; bottom: 0px; width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 344px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: auto;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 50px; min-height: 344px; min-width: 536.297px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>21</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 16px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Template</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">{# [script.myinput] is a custom directive, defined below #}</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">[script.myinput]</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">{# [component.event] is a built-in directive (shortcut is @) #}</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">button</span> <span class="cm-attribute">[component.event]click:</span>=<span class="cm-string">script.showInfo</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    Click me</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">Template</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">function</span> <span class="cm-def">myinputMount</span>(<span class="cm-def">mountOptions</span>) {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">element</span>.<span class="cm-property">inputRef</span> <span class="cm-operator">=</span> <span class="cm-variable-2">mountOptions</span>.<span class="cm-property">el</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">// Try uncommenting the following to see data:</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">//console.log("myinputMount:", mountOptions);</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">function</span> <span class="cm-def">showInfo</span>(<span class="cm-def">el</span>) {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">alert</span>(<span class="cm-string">"Focusing on:"</span> <span class="cm-operator">+</span> <span class="cm-variable">String</span>(<span class="cm-variable">element</span>.<span class="cm-property">inputRef</span>));</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">element</span>.<span class="cm-property">inputRef</span>.<span class="cm-property">focus</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">Script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 344px;"></div><div class="CodeMirror-gutters" style="height: 394px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></div>
        </div>

        
            <div class="editor-minipreview">
                <div modulo-ignore="">
                    <e1g1-example modulo-original-html="">

<input [script.myinput]="">


<button [component.event]click:="script.showInfo">
    Click me
</button>
</e1g1-example>
                </div>
            </div>
        

    </div>
</div>

</mws-demo>


<h3>Registering CPart directives with shortcuts</h3>

<p>If you are a CPart developer, you might want to register a shortcut along
with your CPart's directive. Note that this only applies to CPart developers:
Component developers should never create shortcuts for the script-tag based
custom directives used (which should be avoided to begin with).</p>


<p>See below for an example:</p>

<mws-demo demotype="minipreview" text="
<Template>
    Game Shop: 31 moneys<br />
    Avg Movie Creeps: 10 moneys<br />
    <button @click:=script.toggle>
        {% if state.show %}
        Show controls (and trigger mount directive callbacks)
        {% else %}
        Hide controls (and trigger unmount callbacks)
        {% endif %}
    </button> <br />
    {% if state.show %}
        <button %%%buy=&quot;GMC&quot;>(text is replaced)</button>
        <button %%%sell=&quot;GMC&quot;></button>
        <button %%%long=&quot;AMC&quot;></button>
        <button %%%short=&quot;AMC&quot;></button>
    {% endif %}
</Template>

<State
    show:=false
></State>

<Script>
    Modulo.directiveShortcuts.push([/^%%%/, &quot;script.example&quot;]);
    // TODO: Fix this with &quot;tmpGetDirectives&quot;
    /*
    // Correct way below:
    function factoryCallback(partOptions, factory, loadObj)  {
        loadObj.component.directiveShortcuts.push([/^%%%/, &quot;script.example&quot;]);
    }
    */

    function exampleMount(info) {
        console.log(&quot;Mounting directive:&quot;, info);
        const {el, value, attrName, rawName} = info;
        el.textContent = `${attrName} ${value}`;
        el.onclick = () => alert(attrName + &quot;ing &quot; + value);
    }
    function exampleUnmount(info) {
        console.log(&quot;Unmounting directive:&quot;, info);
    }
    function toggle() {
        state.show = !state.show;
    }
</Script>
" modulo-original-html="null"></mws-demo>

<p><strong>Note:</strong> "Do as I say, not as I do": To keep the previous
example simple, we are demonstrating it's use within a script tag in a
component, but in general shortcuts are only intended for CPart directives, not
custom script tag directives.</p>


</aside>
    </main>


<footer>
    <main>
        (C) 2022 - Michael Bethencourt - Documentation under LGPL 3.0
    </main>
</footer>



</body>